[{"C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\main.ts":"1","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\App.vue":"2","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\router\\index.ts":"3","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\store\\index.ts":"4","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\views\\AboutView.vue":"5","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\views\\TestPageView.vue":"6","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\views\\LoginTest.vue":"7","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\views\\BookView.vue":"8","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\views\\NavView.vue":"9","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\views\\HomeView.vue":"10","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\views\\ReturnView.vue":"11","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\views\\BorrowView.vue":"12","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\views\\OvertimeView.vue":"13","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\views\\UserView.vue":"14","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\views\\SystemView.vue":"15","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\logincomponents\\SwitchView.vue":"16","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\logincomponents\\Sign-up.vue":"17","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\logincomponents\\Sign-in.vue":"18","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\hooks\\useloginEmitter.js":"19","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\views\\LoginView.vue":"20"},{"size":459,"mtime":1734607413465,"results":"21","hashOfConfig":"22"},{"size":335,"mtime":1734208618000,"results":"23","hashOfConfig":"22"},{"size":2913,"mtime":1734609709912,"results":"24","hashOfConfig":"22"},{"size":145,"mtime":1734208618000,"results":"25","hashOfConfig":"22"},{"size":856,"mtime":1734208618000,"results":"26","hashOfConfig":"22"},{"size":399,"mtime":1734208620000,"results":"27","hashOfConfig":"22"},{"size":2752,"mtime":1734608377168,"results":"28","hashOfConfig":"22"},{"size":18920,"mtime":1734208618000,"results":"29","hashOfConfig":"22"},{"size":5109,"mtime":1734519302000,"results":"30","hashOfConfig":"22"},{"size":4336,"mtime":1734208618000,"results":"31","hashOfConfig":"22"},{"size":6278,"mtime":1734208620000,"results":"32","hashOfConfig":"22"},{"size":4346,"mtime":1734208618000,"results":"33","hashOfConfig":"22"},{"size":6574,"mtime":1734208620000,"results":"34","hashOfConfig":"22"},{"size":22444,"mtime":1734208620000,"results":"35","hashOfConfig":"22"},{"size":8921,"mtime":1734208620000,"results":"36","hashOfConfig":"22"},{"size":1329,"mtime":1734607514437,"results":"37","hashOfConfig":"22"},{"size":6943,"mtime":1734608202122,"results":"38","hashOfConfig":"22"},{"size":4292,"mtime":1734607674045,"results":"39","hashOfConfig":"22"},{"size":231,"mtime":1734607591785,"results":"40","hashOfConfig":"22"},{"size":4007,"mtime":1734531208000,"results":"41","hashOfConfig":"22"},{"filePath":"42","messages":"43","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"2s2mch",{"filePath":"45","messages":"46","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"48","messages":"49","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"50","messages":"51","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"52","messages":"53","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"54","messages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"56","messages":"57","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"60","usedDeprecatedRules":"47"},{"filePath":"61","messages":"62","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63","usedDeprecatedRules":"47"},{"filePath":"64","messages":"65","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"66","usedDeprecatedRules":"47"},{"filePath":"67","messages":"68","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"69","usedDeprecatedRules":"47"},{"filePath":"70","messages":"71","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"72","messages":"73","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"74","usedDeprecatedRules":"47"},{"filePath":"75","messages":"76","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"77","usedDeprecatedRules":"47"},{"filePath":"78","messages":"79","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"80","messages":"81","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"82","messages":"83","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"84","messages":"85","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"86","usedDeprecatedRules":"47"},{"filePath":"87","messages":"88","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"89"},{"filePath":"90","messages":"91","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\main.ts",[],[],"C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\App.vue",[],[],"C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\router\\index.ts",["92"],"C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\store\\index.ts",[],"C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\views\\AboutView.vue",[],"C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\views\\TestPageView.vue",[],"C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\views\\LoginTest.vue",[],"C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\views\\BookView.vue",["93","94","95","96","97","98"],"<template>\n  <div class=\"book\">\n    <el-container>\n      <el-main>\n        <!--        图书操作栏-->\n        <el-row class=\"book-header\">\n          <el-col :span=\"4\" class=\"search-page-pane\">\n            <el-select\n              v-model=\"pageSize\"\n              placeholder=\"数据显示\"\n              @change=\"changeSize\"\n              class=\"search-size\"\n            >\n              <el-option\n                v-for=\"item in sizeOptions\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\"\n              >\n              </el-option>\n            </el-select>\n          </el-col>\n          <el-col :span=\"16\" class=\"search-input-pane\">\n            <el-row>\n              <el-col :span=\"4\">\n                <el-select\n                  v-model=\"searchModel\"\n                  placeholder=\"搜索类型\"\n                  @change=\"changeSearch\"\n                  class=\"search-size\"\n                >\n                  <el-option\n                    v-for=\"item in searchOptions\"\n                    :key=\"item.value\"\n                    :label=\"item.label\"\n                    :value=\"item.value\"\n                  >\n                  </el-option>\n                </el-select>\n              </el-col>\n              <el-col :span=\"14\">\n                <el-input\n                  placeholder=\"请输入搜索内容\"\n                  v-model=\"searchInput\"\n                  :suffix-icon=\"Search\"\n                  class=\"search-input\"\n                >\n                </el-input>\n              </el-col>\n              <el-col :span=\"6\">\n                <el-button\n                  type=\"primary\"\n                  class=\"search-button\"\n                  @click=\"searchButton\"\n                >\n                  搜索\n                </el-button>\n              </el-col>\n            </el-row>\n          </el-col>\n          <el-col :span=\"4\" class=\"add-button-pane\">\n            <el-button\n              type=\"success\"\n              :icon=\"Plus\"\n              class=\"add-button\"\n              @click=\"addFromButton(addBookFormRef)\"\n            >\n              添加图书\n            </el-button>\n          </el-col>\n        </el-row>\n        <!--        图书表格栏-->\n        <el-row class=\"book-table\">\n          <el-col>\n            <el-table :data=\"books\" height=\"100%\" empty-text=\"没有数据\">\n              <el-table-column fixed prop=\"id\" label=\"Id\" width=\"50\" />\n              <el-table-column prop=\"groups\" label=\"组名\" />\n              <el-table-column prop=\"name\" label=\"书名\" />\n              <el-table-column prop=\"author\" label=\"作者\" />\n              <el-table-column prop=\"press\" label=\"出版社\" />\n              <el-table-column prop=\"price\" label=\"价格(人民币)\" />\n              <el-table-column prop=\"quantity\" label=\"数量(本)\" />\n              <el-table-column prop=\"isbn\" label=\"ISBN号码\" />\n              <el-table-column fixed=\"right\" label=\"操作\">\n                <template #default=\"books\">\n                  <el-button\n                    @click=\"editFromButton(editBookFormRef, books.row)\"\n                    type=\"text\"\n                    >编辑</el-button\n                  >\n                  <el-button @click=\"deleteBookDialog(books.row)\" type=\"text\"\n                    >删除</el-button\n                  >\n                </template>\n              </el-table-column>\n            </el-table>\n            <el-pagination\n              background\n              v-model:current-page=\"pageNum\"\n              v-model:page-size=\"pageSize\"\n              layout=\"prev, pager, next\"\n              :total=\"pageTotal\"\n              @current-change=\"page\"\n            >\n            </el-pagination>\n          </el-col>\n        </el-row>\n\n        <!--         添加图书表单 -->\n        <el-dialog\n          v-model=\"addBookFormVisible\"\n          title=\"添加书籍\"\n          class=\"add-book-dialog\"\n          width=\"500px\"\n          :close-on-click-modal=\"false\"\n        >\n          <el-form\n            :model=\"addBookForm\"\n            :rules=\"bookRules\"\n            ref=\"addBookFormRef\"\n            class=\"add-book-form\"\n          >\n            <el-form-item\n              label=\"所属组\"\n              :label-width=\"formLabelWidth\"\n              prop=\"groups\"\n            >\n              <el-select\n                v-model=\"addBookForm.groups\"\n                placeholder=\"请选择所属组\"\n              >\n                <el-option\n                  v-for=\"item in bookType\"\n                  :key=\"item.typeId\"\n                  :label=\"item.typeName\"\n                  :value=\"item.typeName\"\n                >\n                </el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item\n              label=\"书名\"\n              :label-width=\"formLabelWidth\"\n              prop=\"name\"\n            >\n              <el-input\n                v-model=\"addBookForm.name\"\n                autocomplete=\"off\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item\n              label=\"作者\"\n              :label-width=\"formLabelWidth\"\n              prop=\"author\"\n            >\n              <el-input\n                v-model=\"addBookForm.author\"\n                autocomplete=\"off\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item\n              label=\"出版社\"\n              :label-width=\"formLabelWidth\"\n              prop=\"press\"\n            >\n              <el-input\n                v-model=\"addBookForm.press\"\n                autocomplete=\"off\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item\n              label=\"价格(人民币)\"\n              :label-width=\"formLabelWidth\"\n              prop=\"price\"\n            >\n              <el-input\n                v-model=\"addBookForm.price\"\n                autocomplete=\"off\"\n                maxlength=\"13\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item\n              label=\"数量(本)\"\n              :label-width=\"formLabelWidth\"\n              prop=\"quantity\"\n            >\n              <el-input\n                v-model.number=\"addBookForm.quantity\"\n                autocomplete=\"off\"\n                maxlength=\"3\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item\n              label=\"ISBN号码\"\n              :label-width=\"formLabelWidth\"\n              prop=\"isbn\"\n            >\n              <el-input\n                v-model.number=\"addBookForm.isbn\"\n                autocomplete=\"off\"\n                maxlength=\"13\"\n              ></el-input>\n            </el-form-item>\n          </el-form>\n          <template #footer>\n            <span class=\"dialog-footer\">\n              <el-button @click=\"addBookFormVisible = false\">取消</el-button>\n              <el-button type=\"primary\" @click=\"addBookButton(addBookFormRef)\">\n                添加\n              </el-button>\n            </span>\n          </template>\n        </el-dialog>\n\n        <!--        编辑图书表单-->\n        <el-dialog\n          v-model=\"editBookFormVisible\"\n          title=\"编辑书籍\"\n          class=\"edit-book-dialog\"\n          width=\"500px\"\n          :close-on-click-modal=\"false\"\n        >\n          <el-form\n            :model=\"editBookForm\"\n            :rules=\"bookRules\"\n            ref=\"editBookFormRef\"\n            class=\"edit-book-form\"\n          >\n            <el-form-item\n              label=\"所属组\"\n              :label-width=\"formLabelWidth\"\n              prop=\"groups\"\n            >\n              <el-select\n                v-model=\"editBookForm.groups\"\n                placeholder=\"请选择所属组\"\n              >\n                <el-option\n                  v-for=\"item in bookType\"\n                  :key=\"item.typeId\"\n                  :label=\"item.typeName\"\n                  :value=\"item.typeName\"\n                >\n                </el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item\n              label=\"书名\"\n              :label-width=\"formLabelWidth\"\n              prop=\"name\"\n            >\n              <el-input\n                v-model=\"editBookForm.name\"\n                autocomplete=\"off\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item\n              label=\"作者\"\n              :label-width=\"formLabelWidth\"\n              prop=\"author\"\n            >\n              <el-input\n                v-model=\"editBookForm.author\"\n                autocomplete=\"off\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item\n              label=\"出版社\"\n              :label-width=\"formLabelWidth\"\n              prop=\"press\"\n            >\n              <el-input\n                v-model=\"editBookForm.press\"\n                autocomplete=\"off\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item\n              label=\"价格(人民币)\"\n              :label-width=\"formLabelWidth\"\n              prop=\"price\"\n            >\n              <el-input\n                v-model=\"editBookForm.price\"\n                autocomplete=\"off\"\n                maxlength=\"13\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item\n              label=\"数量(本)\"\n              :label-width=\"formLabelWidth\"\n              prop=\"quantity\"\n            >\n              <el-input\n                v-model.number=\"editBookForm.quantity\"\n                autocomplete=\"off\"\n                maxlength=\"3\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item\n              label=\"ISBN号码\"\n              :label-width=\"formLabelWidth\"\n              prop=\"isbn\"\n            >\n              <el-input\n                v-model.number=\"editBookForm.isbn\"\n                autocomplete=\"off\"\n                maxlength=\"13\"\n              ></el-input>\n            </el-form-item>\n          </el-form>\n          <template #footer>\n            <span class=\"dialog-footer\">\n              <el-button @click=\"editBookFormVisible = false\">取消</el-button>\n              <el-button\n                type=\"primary\"\n                @click=\"editBookButton(editBookFormRef)\"\n              >\n                编辑\n              </el-button>\n            </span>\n          </template>\n        </el-dialog>\n\n        <!--        删除图书对话框-->\n        <el-dialog\n          v-model=\"deleteBookDialogVisible\"\n          title=\"删除图书\"\n          width=\"500px\"\n        >\n          <span>确认删除 {{ deleteName }}</span>\n          <template #footer>\n            <span class=\"dialog-footer\">\n              <el-button @click=\"deleteBookDialogVisible = false\"\n                >取消</el-button\n              >\n              <el-button type=\"danger\" @click=\"deleteBook\"> 确认 </el-button>\n            </span>\n          </template>\n        </el-dialog>\n      </el-main>\n    </el-container>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { reactive, ref } from \"vue\";\nimport type { FormInstance, FormRules } from \"element-plus\";\nimport { Plus, Search } from \"@element-plus/icons-vue\";\nimport axios from \"axios\";\nimport { ElMessageBox } from \"element-plus\";\nimport router from \"@/router\";\n\n// 标签长度\nlet formLabelWidth = 120;\n\n// 获取图书数据\nlet books = ref();\nconst getBook = () => {\n  axios\n    .get(\"http://localhost:8888/book/\" + pageNum.value + \"/\" + pageSize.value)\n    .then((resp) => {\n      books.value = resp.data.content;\n      pageTotal.value = resp.data.totalElements;\n    });\n};\n\n// 显示数据数量选项\nlet pageNum = ref(1);\nlet pageSize = ref(10);\nlet pageTotal = ref(0);\nconst page = (val: number) => {\n  pageNum.value = val;\n  if (searchInput.value == undefined) {\n    getBook();\n  } else {\n    searchBook();\n  }\n};\n\n// 数据显示框\nlet sizeOptions = [\n  {\n    value: 10,\n    label: \"10条数据/页\",\n  },\n  {\n    value: 50,\n    label: \"50条数据/页\",\n  },\n  {\n    value: 100,\n    label: \"100条数据/页\",\n  },\n];\n// 修改显示数据量\nconst changeSize = (value: number) => {\n  pageSize.value = value;\n  if (searchInput.value == undefined) {\n    getBook();\n  } else {\n    searchBook();\n  }\n};\n\n// 搜索框选项\nlet searchModel = ref(\"name\");\nlet searchOptions = [\n  {\n    value: \"name\",\n    label: \"图书名称\",\n  },\n  {\n    value: \"author\",\n    label: \"作者名称\",\n  },\n  {\n    value: \"press\",\n    label: \"出版社名称\",\n  },\n  {\n    value: \"isbn\",\n    label: \"ISBN号码\",\n  },\n];\nconst changeSearch = (value: string) => {\n  searchModel.value = value;\n};\n\n// 搜索框数据\nconst searchInput = ref();\n// 搜索框按钮\nconst searchButton = () => {\n  pageNum.value = 1;\n  searchBook();\n};\n// 搜索图书\nconst searchBook = () => {\n  if (searchInput.value != \"\") {\n    axios\n      .get(\n        \"http://localhost:8888/book/search/\" +\n          searchModel.value +\n          \"/\" +\n          searchInput.value +\n          \"/\" +\n          pageNum.value +\n          \"/\" +\n          pageSize.value\n      )\n      .then((resp) => {\n        books.value = resp.data.content;\n        pageTotal.value = resp.data.totalElements;\n      });\n  } else {\n    getBook();\n  }\n};\n\n// 图书表单判断\nconst checkISBN = (rule: any, value: any, callback: any) => {\n  if (!value) {\n    return callback(new Error(\"请输入ISBN号码\"));\n  } else {\n    if (!Number.isInteger(value)) {\n      callback(new Error(\"请输入正确的ISBN号码\"));\n    } else {\n      let isbnReg = /^[1-9]\\d{12}$/;\n      if (!isbnReg.test(value)) {\n        callback(new Error(\"请输入13位ISBN号码\"));\n      } else {\n        callback();\n      }\n    }\n  }\n};\n// 图书表单规则\nconst bookRules = reactive<FormRules>({\n  groups: [{ required: true, message: \"请输入组名称\", trigger: \"change\" }],\n  name: [{ required: true, message: \"请输入图书名称\", trigger: \"blur\" }],\n  author: [{ required: true, message: \"请输入作者名称\", trigger: \"blur\" }],\n  press: [{ required: true, message: \"请输入出版社名称\", trigger: \"blur\" }],\n  price: [{ required: true, message: \"请输入价格(人民币)\", trigger: \"blur\" }],\n  quantity: [{ required: true, message: \"请输入数量(本)\", trigger: \"blur\" }],\n  isbn: [{ required: true, validator: checkISBN, trigger: \"blur\" }],\n});\n\n// 图书种类选项框\nlet bookType = ref();\n// 获取图书种类\nconst getBookType = () => {\n  axios.get(\"http://localhost:8888/book/type\").then((resp) => {\n    bookType.value = resp.data;\n  });\n};\n\n// 添加图书对话框显示\nlet addBookFormVisible = ref(false);\n// 添加表单按钮\nconst addFromButton = (formEl: FormInstance | undefined) => {\n  addBookFormVisible.value = true;\n  if (!formEl) return;\n  formEl.resetFields();\n};\n\n// 添加图书表单\nconst addBookFormRef = ref<FormInstance>();\nlet addBookForm = reactive({\n  groups: \"\",\n  name: \"\",\n  author: \"\",\n  press: \"\",\n  price: \"\",\n  quantity: \"\",\n  isbn: \"\",\n});\n\n// 添加图书按钮\nconst addBookButton = (formEl: FormInstance | undefined) => {\n  if (!formEl) return;\n  formEl.validate((valid) => {\n    if (valid) {\n      axios\n        .post(\"http://localhost:8888/book/save\", addBookForm)\n        .then((resp) => {\n          const statusCode = resp.data.statusCode;\n\n          // 添加失败\n          if (statusCode == 0) {\n            ElMessageBox.alert(\"添加图书失败，请重试\", \"信息\", {\n              confirmButtonText: \"确认\",\n            });\n          }\n          // 添加成功\n          if (statusCode == 1) {\n            ElMessageBox.alert(\"添加成功\", \"信息\", {\n              confirmButtonText: \"确认\",\n              callback: () => {\n                addBookFormVisible.value = false;\n              },\n            });\n          }\n          // ISBN号码存在\n          if (statusCode == 2) {\n            ElMessageBox.alert(\"添加失败，此ISBN号码已存在\", \"信息\", {\n              confirmButtonText: \"确认\",\n            });\n          }\n        });\n    } else {\n      return false;\n    }\n  });\n};\n\n// 编辑图书对话框\nlet editBookFormVisible = ref(false);\nconst editFromButton = (formEl: FormInstance | undefined, row: any) => {\n  editBookFormVisible.value = true;\n  editBookForm = reactive(JSON.parse(JSON.stringify(row)));\n  editBookForm.isbn = Number(row.isbn);\n  if (!formEl) return;\n  formEl.resetFields();\n};\n\n// 编辑图书表单\nconst editBookFormRef = ref<FormInstance>();\nlet editBookForm = reactive({\n  groups: \"\",\n  name: \"\",\n  author: \"\",\n  press: \"\",\n  price: \"\",\n  quantity: \"\",\n  isbn: \"\",\n});\n\n// 编辑图书按钮\nconst editBookButton = (formEl: FormInstance | undefined) => {\n  if (!formEl) return;\n  formEl.validate((valid) => {\n    if (valid) {\n      axios\n        .post(\"http://localhost:8888/book/update\", editBookForm)\n        .then((resp) => {\n          const statusCode = resp.data.statusCode;\n\n          // 编辑失败\n          if (statusCode == 0) {\n            ElMessageBox.alert(\"编辑图书失败，请重试\", \"信息\", {\n              confirmButtonText: \"确认\",\n            });\n          }\n          // 编辑成功\n          if (statusCode == 1) {\n            ElMessageBox.alert(\"编辑成功\", \"信息\", {\n              confirmButtonText: \"确认\",\n              callback: () => {\n                editBookFormVisible.value = false;\n              },\n            });\n          }\n          // ISBN号码存在\n          if (statusCode == 2) {\n            ElMessageBox.alert(\"编辑失败，此ISBN号码已存在\", \"信息\", {\n              confirmButtonText: \"确认\",\n            });\n          }\n        });\n    } else {\n      return false;\n    }\n  });\n};\n\n// 删除图书\nlet deleteName = ref(\"\");\nlet deleteId = ref(0);\nlet deleteBookDialogVisible = ref(false);\nconst deleteBookDialog = (row: any) => {\n  deleteId.value = row.id;\n  deleteName.value = row.name;\n  deleteBookDialogVisible.value = true;\n};\n\n// 删除图书按钮\nconst deleteBook = () => {\n  if (deleteId.value) {\n    axios\n      .post(\"http://localhost:8888/book/delete/\" + deleteId.value)\n      .then((resp) => {\n        const statusCode = resp.data.statusCode;\n\n        // 删除失败\n        if (statusCode == 0) {\n          ElMessageBox.alert(\"删除图书失败，请重试\", \"信息\", {\n            confirmButtonText: \"确认\",\n          });\n        }\n        // 删除成功\n        if (statusCode == 1) {\n          ElMessageBox.alert(\"删除成功\", \"信息\", {\n            confirmButtonText: \"确认\",\n            callback: () => {\n              deleteBookDialogVisible.value = false;\n            },\n          });\n        }\n        // Id 不存在\n        if (statusCode == 2) {\n          ElMessageBox.alert(\"删除失败，此 Id 不存在\", \"信息\", {\n            confirmButtonText: \"确认\",\n          });\n        }\n      });\n  }\n};\n\n// 初始化\nconst init = () => {\n  // 获取图书\n  getBook();\n  // 获取图书种类\n  getBookType();\n};\ninit();\n</script>\n\n<style lang=\"scss\">\n@import \"../assets/css/book\";\n</style>\n","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\views\\NavView.vue",["99","100","101"],"<template>\n  <div class=\"nav\">\n    <el-container class=\"layout-container-demo\" style=\"height: 100%\">\n      <el-aside>\n        <!--        导航栏-->\n        <el-scrollbar>\n          <div class=\"title\"><p>图书管理系统</p></div>\n          <el-menu router :default-active=\"$route.path\" unique-opened>\n            <el-menu-item index=\"/home\" @click=\"addTab('主页', '/home')\"\n              ><el-icon><House /></el-icon>主页</el-menu-item\n            >\n            <el-sub-menu\n              v-for=\"(item, index) in this.$router['options'].routes\"\n              :key=\"index + 1\"\n              :index=\"index + ''\"\n              v-show=\"item.meta.show\"\n            >\n              <template #title>\n                <el-icon v-if=\"item.name === '图书'\"><Reading /></el-icon>\n                <el-icon v-if=\"item.name === '其他'\"><Setting /></el-icon>\n                <el-icon v-if=\"item.name === '用户'\"><User /></el-icon>\n                <p>{{ item.name }}</p>\n              </template>\n              <el-menu-item\n                v-for=\"(item2, index2) in item.children\"\n                :key=\"index2\"\n                :index=\"item2.path\"\n                v-show=\"item2.meta.show\"\n                @click=\"addTab(item2.name, item2.path)\"\n              >\n                {{ item2.name }}\n              </el-menu-item>\n            </el-sub-menu>\n            <el-menu-item @click=\"loginOut\"\n              ><el-icon><Back /></el-icon>退出系统</el-menu-item\n            >\n          </el-menu>\n        </el-scrollbar>\n      </el-aside>\n\n      <el-main>\n        <!--        用户信息工具栏-->\n        <div class=\"toolbar\">\n          <span>{{ userInfo.username }}</span>\n          <el-dropdown>\n            <el-icon><Setting /></el-icon>\n            <template #dropdown>\n              <el-dropdown-menu>\n                <el-dropdown-item @click=\"loginOut\">登出</el-dropdown-item>\n              </el-dropdown-menu>\n            </template>\n          </el-dropdown>\n        </div>\n        <!--        标签栏-->\n        <div class=\"tabs\">\n          <el-tabs\n            v-model=\"editableTabsValue\"\n            @tab-click=\"tabClick\"\n            @tab-remove=\"tabRemove\"\n          >\n            <el-tab-pane\n              v-for=\"item in editableTabs\"\n              :label=\"item.name\"\n              :key=\"item.path\"\n              :name=\"item.path\"\n              :closable=\"item.closable\"\n            >\n              <router-view\n                :key=\"item.path\"\n                :name=\"item.routerName\"\n              ></router-view>\n            </el-tab-pane>\n          </el-tabs>\n        </div>\n      </el-main>\n    </el-container>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { ref } from \"vue\";\nimport { House, Reading, User, Setting, Back } from \"@element-plus/icons-vue\";\nimport router from \"../router/index\";\nimport jsCookie from \"js-cookie\";\nimport { ElMessageBox } from \"element-plus\";\n\n// 判断用户登录状态\nconst userLoginState = jsCookie.get(\"username\");\nif (userLoginState == undefined) {\n  ElMessageBox.alert(\"登录信息已过期，请重新登录\", \"信息\", {\n    confirmButtonText: \"确认\",\n    callback: () => {\n      // 页面跳转\n      router.push(\"/login\");\n    },\n  });\n}\n\n// 用户信息\nconst userInfo = ref({\n  username: jsCookie.get(\"username\"),\n});\n\n// 退出系统\nconst loginOut = () => {\n  ElMessageBox.alert(\"您已成功登出\", \"信息\", {\n    confirmButtonText: \"确认\",\n    callback: () => {\n      // 页面跳转\n      router.push(\"/login\");\n      // 删除cookie\n      jsCookie.remove(\"username\");\n    },\n  });\n};\n\n// 添加标签栏\nconst addTab = (name: any, path: any) => {\n  let isExist = false;\n  // 判断标签是否存在\n  for (const item of editableTabs.value) {\n    if (item.name == name && item.path == path) {\n      isExist = true;\n      break;\n    }\n  }\n\n  // 若标签不存在则添加\n  if (!isExist) {\n    editableTabs.value.push({\n      name: name,\n      path: path,\n      closable: true,\n      routerName: path.substring(1),\n    });\n  }\n\n  // 切换标签页\n  editableTabsValue.value = path;\n};\n\n//标签栏\nlet editableTabsValue = ref(\"/home\");\nconst editableTabs = ref([\n  {\n    name: \"主页\",\n    path: \"/home\",\n    closable: false,\n    routerName: \"home\",\n  },\n]);\n\n// 点击标签栏\nconst tabClick = (tab: any) => {\n  router.push(tab.props.name);\n};\n\n// 移除标签栏\nconst tabRemove = (targetName: string) => {\n  const tabs = editableTabs.value;\n  let activeName = editableTabsValue.value;\n  if (activeName === targetName) {\n    tabs.forEach((tab, index) => {\n      if (tab.path === targetName) {\n        const nextTab = tabs[index + 1] || tabs[index - 1];\n        if (nextTab) {\n          activeName = nextTab.path;\n        }\n      }\n    });\n  }\n\n  // 切换页面\n  router.push(activeName);\n  editableTabsValue.value = activeName;\n  editableTabs.value = tabs.filter((tab) => tab.path !== targetName);\n};\n\n// 标签初始化\nconst tabName = router.currentRoute.value.name;\nconst tabPath = router.currentRoute.value.path;\naddTab(tabName, tabPath);\n</script>\n\n<style lang=\"scss\">\n@import \"../assets/css/nav\";\n</style>\n","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\views\\HomeView.vue",["102","103","104","105"],"<template>\n  <div class=\"home\">\n    <el-main>\n      <!--      仪表盘-->\n      <el-row class=\"dashboard\">\n        <el-col :xs=\"24\" :sm=\"12\" :lg=\"6\" class=\"book-num pane\"\n          ><div>\n            <el-icon><Reading /></el-icon>\n            <div class=\"message\">\n              <p class=\"title\">图书馆书本数量</p>\n              <p class=\"sub-title\">{{ bookCount }}</p>\n            </div>\n          </div></el-col\n        >\n        <el-col :xs=\"24\" :sm=\"12\" :lg=\"6\" class=\"overtime-num pane\"\n          ><div>\n            <el-icon><Failed /></el-icon>\n            <div class=\"message\">\n              <p class=\"title\">超时归还数量</p>\n              <p class=\"sub-title\">{{ overtimeCount }}</p>\n            </div>\n          </div></el-col\n        >\n        <el-col :xs=\"24\" :sm=\"12\" :lg=\"6\" class=\"borrow-num pane\"\n          ><div>\n            <el-icon><List /></el-icon>\n            <div class=\"message\">\n              <p class=\"title\">借出书本数量</p>\n              <p class=\"sub-title\">{{ borrowCount }}</p>\n            </div>\n          </div></el-col\n        >\n        <el-col :xs=\"24\" :sm=\"12\" :lg=\"6\" class=\"system-time pane\"\n          ><div>\n            <el-icon><Timer /></el-icon>\n            <div class=\"message\">\n              <p class=\"title\">系统时间</p>\n              <p class=\"time\">{{ times }}</p>\n            </div>\n          </div></el-col\n        >\n      </el-row>\n      <!--      介绍卡片-->\n      <el-card class=\"introduce\">\n        <template #header> 开源信息 </template>\n        <p>作者信息：KSaMar</p>\n        <p>该项目模拟学校图书馆的图书管理系统</p>\n        <p>\n          码云下载地址：<a\n            href=\"https://github.com/baobaoJK/Vue-Element-Plus-SpringBoot-Library\"\n            >Gitee</a\n          >\n        </p>\n        <p>\n          GitHub下载地址：<a\n            href=\"https://gitee.com/baobao_JK/Vue-Element-Plus-SpringBoot-Library\"\n            >GitHub</a\n          >\n        </p>\n        <p>文档地址：<a href=\"#\">文档.md</a></p>\n      </el-card>\n      <!--      日志卡片-->\n      <el-card class=\"log\">\n        <template #header>\n          <span>操作日志</span>\n        </template>\n        <el-table\n          style=\"width: 100%\"\n          height=\"600\"\n          :data=\"logs\"\n          :default-sort=\"{ prop: 'date', order: 'descending' }\"\n        >\n          <el-table-column\n            prop=\"time\"\n            label=\"日期/时间\"\n            sortable\n            width=\"220px\"\n          />\n          <el-table-column prop=\"name\" label=\"名字\" width=\"120px\" />\n          <el-table-column prop=\"info\" label=\"操作\" />\n        </el-table>\n      </el-card>\n    </el-main>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { ref } from \"vue\";\nimport { Reading, Failed, List, Timer } from \"@element-plus/icons-vue\";\nimport axios from \"axios\";\n\n// 仪表盘数据\nlet bookCount = ref(0);\nlet overtimeCount = ref(0);\nlet borrowCount = ref(0);\nlet times = ref(\"\");\n\n//系统时间\nsetInterval(function () {\n  let date = new Date();\n  let year = date.getFullYear(); //获取当前年份\n  let mon = date.getMonth() + 1; //获取当前月份\n  let da = date.getDate(); //获取当前日\n  let day = date.getDay(); //获取当前星期几\n  let h: any = date.getHours(); //获取小时\n  let m: any = date.getMinutes(); //获取分钟\n  let s: any = date.getSeconds(); //获取秒\n  let weeks = [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"]; //星期\n  let d = document.getElementById(\"Date\");\n  if (h < 10) {\n    h = \"0\" + h;\n  }\n  if (m < 10) {\n    m = \"0\" + m;\n  }\n  if (s < 10) {\n    s = \"0\" + s;\n  }\n  times.value =\n    year +\n    \"-\" +\n    mon +\n    \"-\" +\n    da +\n    \" \" +\n    \"星期\" +\n    weeks[day] +\n    \" \" +\n    h +\n    \":\" +\n    m +\n    \":\" +\n    s;\n}, 1);\n\n// 获取仪表盘数据\nconst getDashboard = () => {\n  axios.get(\"http://localhost:8888/book/dashboard/\").then((resp) => {\n    bookCount.value = resp.data.bookCount;\n    overtimeCount.value = resp.data.overtimeCount;\n    borrowCount.value = resp.data.borrowCount;\n  });\n};\ngetDashboard();\n\n// 获取日志数据\nlet logs = ref();\nconst getLogs = () => {\n  axios.get(\"http://localhost:8888/nav/logs/\").then((resp) => {\n    logs.value = resp.data.content;\n  });\n};\ngetLogs();\n</script>\n\n<style lang=\"scss\">\n@import \"../assets/css/home\";\n</style>\n","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\views\\ReturnView.vue",["106"],"<template>\n  <div class=\"return\">\n    <el-container>\n      <el-main>\n        <!--        归还图书操作栏-->\n        <el-row class=\"return-header\">\n          <el-col :span=\"4\" class=\"search-page-pane\">\n            <el-select\n              v-model=\"pageSize\"\n              placeholder=\"数据显示\"\n              @change=\"changeSize\"\n              class=\"search-size\"\n            >\n              <el-option\n                v-for=\"item in sizeOptions\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\"\n              >\n              </el-option>\n            </el-select>\n          </el-col>\n          <el-col :span=\"16\" class=\"search-input-pane\">\n            <el-row>\n              <el-col :span=\"18\">\n                <el-input\n                  placeholder=\"请输入搜索内容\"\n                  v-model=\"searchInput\"\n                  :suffix-icon=\"Search\"\n                  class=\"search-input\"\n                >\n                </el-input>\n              </el-col>\n              <el-col :span=\"6\">\n                <el-button\n                  type=\"primary\"\n                  class=\"search-button\"\n                  @click=\"searchButton\"\n                >\n                  搜索\n                </el-button>\n              </el-col>\n            </el-row>\n          </el-col>\n        </el-row>\n        <!--        归还图书表格栏-->\n        <el-row class=\"return-table\">\n          <el-col>\n            <el-table :data=\"borrows\" height=\"100%\" empty-text=\"没有数据\">\n              <el-table-column fixed prop=\"id\" label=\"Id\" width=\"50\" />\n              <el-table-column prop=\"bookName\" label=\"书名\" />\n              <el-table-column prop=\"isbn\" label=\"ISBN号码\" />\n              <el-table-column prop=\"username\" label=\"借阅人\" />\n              <el-table-column prop=\"idCard\" label=\"借阅卡号\" />\n              <el-table-column prop=\"borrowTime\" label=\"借阅时间\" />\n              <el-table-column prop=\"returnTime\" label=\"应归还时间\" />\n              <el-table-column fixed=\"right\" label=\"操作\">\n                <template #default=\"borrows\">\n                  <el-button @click=\"returnBookDialog(borrows.row)\" type=\"text\"\n                    >归还</el-button\n                  >\n                </template>\n              </el-table-column>\n            </el-table>\n            <el-pagination\n              background\n              v-model:current-page=\"pageNum\"\n              v-model:page-size=\"pageSize\"\n              layout=\"prev, pager, next\"\n              :total=\"pageTotal\"\n              @current-change=\"page\"\n            >\n            </el-pagination>\n          </el-col>\n        </el-row>\n        <!--        归还图书对话框-->\n        <el-dialog\n          v-model=\"returnBookDialogVisible\"\n          title=\"归还图书\"\n          width=\"500px\"\n        >\n          <span>确认归还 {{ returnName }}</span>\n          <template #footer>\n            <span class=\"dialog-footer\">\n              <el-button @click=\"returnBookDialogVisible = false\"\n                >取消</el-button\n              >\n              <el-button type=\"primary\" @click=\"returnBook\"> 确认 </el-button>\n            </span>\n          </template>\n        </el-dialog>\n      </el-main>\n    </el-container>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { ref } from \"vue\";\nimport { Search } from \"@element-plus/icons-vue\";\nimport axios from \"axios\";\nimport { ElMessageBox } from \"element-plus\";\n\n// 借阅图书信息\nlet borrows = ref();\nconst getBorrow = () => {\n  axios\n    .get(\"http://localhost:8888/borrow/\" + pageNum.value + \"/\" + pageSize.value)\n    .then((resp) => {\n      borrows.value = resp.data.content;\n      pageTotal.value = resp.data.totalElements;\n    });\n};\n\n// 显示数据数量选项\nlet pageNum = ref(1);\nlet pageSize = ref(10);\nlet pageTotal = ref(0);\nconst page = (val: number) => {\n  pageNum.value = val;\n  if (searchInput.value == undefined) {\n    getBorrow();\n  } else {\n    searchBorrow();\n  }\n};\n\n// 数据显示框\nlet sizeOptions = [\n  {\n    value: 10,\n    label: \"10条数据/页\",\n  },\n  {\n    value: 50,\n    label: \"50条数据/页\",\n  },\n  {\n    value: 100,\n    label: \"100条数据/页\",\n  },\n];\n// 修改显示数据量\nconst changeSize = (value: number) => {\n  pageSize.value = value;\n  if (searchInput.value == undefined) {\n    getBorrow();\n  } else {\n    searchBorrow();\n  }\n};\n\n// 搜索框数据\nconst searchInput = ref();\n// 搜索框按钮\nconst searchButton = () => {\n  pageNum.value = 1;\n  searchBorrow();\n};\n// 搜索借阅信息\nconst searchBorrow = () => {\n  if (searchInput.value != \"\") {\n    axios\n      .get(\n        \"http://localhost:8888/borrow/search/\" +\n          searchInput.value +\n          \"/\" +\n          pageNum.value +\n          \"/\" +\n          pageSize.value\n      )\n      .then((resp) => {\n        borrows.value = resp.data.content;\n        pageTotal.value = resp.data.totalElements;\n      });\n  } else {\n    getBorrow();\n  }\n};\n\n// 归还图书\nlet returnName = ref(\"\");\nlet returnId = ref(0);\nlet returnBookDialogVisible = ref(false);\nconst returnBookDialog = (row: any) => {\n  returnId.value = row.id;\n  returnName.value = row.bookName;\n  returnBookDialogVisible.value = true;\n};\nconst returnBook = () => {\n  if (returnId.value) {\n    axios\n      .post(\"http://localhost:8888/borrow/return/\" + returnId.value)\n      .then((resp) => {\n        const statusCode = resp.data.statusCode;\n\n        // 归还失败\n        if (statusCode == 0) {\n          ElMessageBox.alert(\"归还图书失败，请重试\", \"信息\", {\n            confirmButtonText: \"确认\",\n          });\n        }\n        // 归还成功\n        if (statusCode == 1) {\n          ElMessageBox.alert(\"归还图书成功\", \"信息\", {\n            confirmButtonText: \"确认\",\n            callback: () => {\n              returnBookDialogVisible.value = false;\n            },\n          });\n        }\n        // 借阅记录不存在\n        if (statusCode == 2) {\n          ElMessageBox.alert(\"归还失败，此借阅记录不存在\", \"信息\", {\n            confirmButtonText: \"确认\",\n          });\n        }\n      });\n  }\n};\n\n// 初始化\nconst init = () => {\n  getBorrow();\n};\ninit();\n</script>\n\n<style lang=\"scss\">\n@import \"../assets/css/return\";\n</style>\n","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\views\\BorrowView.vue",[],"C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\views\\OvertimeView.vue",["107"],"<template>\n  <div class=\"overtime\">\n    <el-container>\n      <el-main>\n        <!--        超时查询操作栏-->\n        <el-row class=\"overtime-header\">\n          <el-col :span=\"4\" class=\"search-page-pane\">\n            <el-select\n              v-model=\"pageSize\"\n              placeholder=\"数据显示\"\n              @change=\"changeSize\"\n              class=\"search-size\"\n            >\n              <el-option\n                v-for=\"item in sizeOptions\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\"\n              >\n              </el-option>\n            </el-select>\n          </el-col>\n          <el-col :span=\"16\" class=\"search-input-pane\">\n            <el-row>\n              <el-col :span=\"18\">\n                <el-input\n                  placeholder=\"请输入搜索内容\"\n                  v-model=\"searchInput\"\n                  :suffix-icon=\"Search\"\n                  class=\"search-input\"\n                >\n                </el-input>\n              </el-col>\n              <el-col :span=\"6\">\n                <el-button\n                  type=\"primary\"\n                  class=\"search-button\"\n                  @click=\"searchButton\"\n                >\n                  搜索\n                </el-button>\n              </el-col>\n            </el-row>\n          </el-col>\n        </el-row>\n        <!--        超时查询表格栏-->\n        <el-row class=\"overtime-table\">\n          <el-col>\n            <el-table :data=\"overtimes\" height=\"100%\" empty-text=\"没有数据\">\n              <el-table-column fixed prop=\"id\" label=\"Id\" width=\"50\" />\n              <el-table-column prop=\"bookName\" label=\"书名\" />\n              <el-table-column prop=\"isbn\" label=\"ISBN号码\" />\n              <el-table-column prop=\"username\" label=\"借阅人\" />\n              <el-table-column prop=\"idCard\" label=\"借阅卡号\" />\n              <el-table-column prop=\"borrowTime\" label=\"借阅时间\" />\n              <el-table-column prop=\"overtimeTime\" label=\"应归还时间\" />\n              <el-table-column fixed=\"right\" label=\"操作\">\n                <template #default=\"overtimes\">\n                  <el-button\n                    @click=\"overtimeBookDialog(overtimes.row)\"\n                    type=\"text\"\n                    >归还</el-button\n                  >\n                </template>\n              </el-table-column>\n            </el-table>\n            <el-pagination\n              background\n              v-model:current-page=\"pageNum\"\n              v-model:page-size=\"pageSize\"\n              layout=\"prev, pager, next\"\n              :total=\"pageTotal\"\n              @current-change=\"page\"\n            >\n            </el-pagination>\n          </el-col>\n        </el-row>\n        <!--        超时查询对话框-->\n        <el-dialog\n          v-model=\"overtimeBookDialogVisible\"\n          title=\"归还图书\"\n          width=\"500px\"\n        >\n          <span>确认归还 {{ overtimeName }}</span>\n          <template #footer>\n            <span class=\"dialog-footer\">\n              <el-button @click=\"overtimeBookDialogVisible = false\"\n                >取消</el-button\n              >\n              <el-button type=\"primary\" @click=\"overtimeBook\"> 确认 </el-button>\n            </span>\n          </template>\n        </el-dialog>\n      </el-main>\n    </el-container>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { ref } from \"vue\";\nimport { Search } from \"@element-plus/icons-vue\";\nimport axios from \"axios\";\nimport { ElMessageBox } from \"element-plus\";\n\n// 超时未归还图书信息\nlet overtimes = ref();\nconst getOvertime = () => {\n  axios\n    .get(\n      \"http://localhost:8888/borrow/overtime/\" +\n        pageNum.value +\n        \"/\" +\n        pageSize.value\n    )\n    .then((resp) => {\n      overtimes.value = resp.data.content;\n      pageTotal.value = resp.data.totalElements;\n    });\n};\n\n// 显示数据数量选项\nlet pageNum = ref(1);\nlet pageSize = ref(10);\nlet pageTotal = ref(0);\nconst page = (val: number) => {\n  pageNum.value = val;\n  if (searchInput.value == undefined) {\n    getOvertime();\n  } else {\n    searchOvertime();\n  }\n};\n\n// 数据显示框\nlet sizeOptions = [\n  {\n    value: 10,\n    label: \"10条数据/页\",\n  },\n  {\n    value: 50,\n    label: \"50条数据/页\",\n  },\n  {\n    value: 100,\n    label: \"100条数据/页\",\n  },\n];\n\n// 修改显示数据量\nconst changeSize = (value: number) => {\n  pageSize.value = value;\n  if (searchInput.value == undefined) {\n    getOvertime();\n  } else {\n    searchOvertime();\n  }\n};\n\n// 搜索框数据\nconst searchInput = ref();\n// 搜索框按钮\nconst searchButton = () => {\n  pageNum.value = 1;\n  searchOvertime();\n};\n// 搜索超时未归还图书信息\nconst searchOvertime = () => {\n  if (searchInput.value != \"\" && searchInput.value != undefined) {\n    axios\n      .get(\n        \"http://localhost:8888/borrow/overtime/search/\" +\n          searchInput.value +\n          \"/\" +\n          pageNum.value +\n          \"/\" +\n          pageSize.value\n      )\n      .then((resp) => {\n        overtimes.value = resp.data.content;\n        pageTotal.value = resp.data.totalElements;\n      });\n  } else {\n    getOvertime();\n  }\n};\n// 超时查询\nlet overtimeName = ref(\"\");\nlet overtimeId = ref(0);\nlet overtimeBookDialogVisible = ref(false);\nconst overtimeBookDialog = (row: any) => {\n  overtimeId.value = row.id;\n  overtimeName.value = row.bookName;\n  console.log(overtimeId);\n  console.log(overtimeName);\n  overtimeBookDialogVisible.value = true;\n};\n// 归还图书\nconst overtimeBook = () => {\n  if (overtimeId.value) {\n    axios\n      .post(\"http://localhost:8888/borrow/return/\" + overtimeId.value)\n      .then((resp) => {\n        const statusCode = resp.data.statusCode;\n\n        // 归还失败\n        if (statusCode == 0) {\n          ElMessageBox.alert(\"归还图书失败，请重试\", \"信息\", {\n            confirmButtonText: \"确认\",\n          });\n        }\n        // 归还成功\n        if (statusCode == 1) {\n          ElMessageBox.alert(\"归还图书成功\", \"信息\", {\n            confirmButtonText: \"确认\",\n            callback: () => {\n              overtimeBookDialogVisible.value = false;\n            },\n          });\n        }\n        // 借阅记录不存在\n        if (statusCode == 2) {\n          ElMessageBox.alert(\"归还失败，此借阅记录不存在\", \"信息\", {\n            confirmButtonText: \"确认\",\n          });\n        }\n      });\n  }\n};\n\n// 初始化\nconst init = () => {\n  getOvertime();\n};\ninit();\n</script>\n\n<style lang=\"scss\">\n@import \"../assets/css/overtime\";\n</style>\n","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\views\\UserView.vue",["108"],"<template>\n  <div class=\"user\">\n    <el-container>\n      <el-main>\n        <!--        用户操作栏-->\n        <el-row class=\"user-header\">\n          <el-col :span=\"4\" class=\"search-page-pane\">\n            <el-select\n              v-model=\"pageSize\"\n              placeholder=\"数据显示\"\n              @change=\"changeSize\"\n              class=\"search-size\"\n            >\n              <el-option\n                v-for=\"item in sizeOptions\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\"\n              >\n              </el-option>\n            </el-select>\n          </el-col>\n          <el-col :span=\"16\" class=\"search-input-pane\">\n            <el-row>\n              <el-col :span=\"4\">\n                <el-select\n                  v-model=\"searchModel\"\n                  placeholder=\"搜索类型\"\n                  @change=\"changeSearch\"\n                  class=\"search-size\"\n                >\n                  <el-option\n                    v-for=\"item in searchOptions\"\n                    :key=\"item.value\"\n                    :label=\"item.label\"\n                    :value=\"item.value\"\n                  >\n                  </el-option>\n                </el-select>\n              </el-col>\n              <el-col :span=\"14\">\n                <el-input\n                  placeholder=\"请输入搜索内容\"\n                  v-model=\"searchInput\"\n                  :suffix-icon=\"Search\"\n                  class=\"search-input\"\n                >\n                </el-input>\n              </el-col>\n              <el-col :span=\"6\">\n                <el-button\n                  type=\"primary\"\n                  class=\"search-button\"\n                  @click=\"searchButton\"\n                >\n                  搜索\n                </el-button>\n              </el-col>\n            </el-row>\n          </el-col>\n          <el-col :span=\"4\" class=\"add-button-pane\">\n            <el-button\n              type=\"success\"\n              :icon=\"Plus\"\n              class=\"add-button\"\n              @click=\"addFromButton(addUserFormRef)\"\n            >\n              添加用户\n            </el-button>\n          </el-col>\n        </el-row>\n        <!--        用户表格栏-->\n        <el-row class=\"user-table\">\n          <el-col>\n            <el-table :data=\"users\" height=\"100%\" empty-text=\"没有数据\">\n              <el-table-column fixed prop=\"id\" label=\"Id\" width=\"50\" />\n              <el-table-column prop=\"groups\" label=\"组名\" />\n              <el-table-column prop=\"username\" label=\"用户名\" />\n              <el-table-column prop=\"name\" label=\"姓名\" />\n              <el-table-column prop=\"gender\" label=\"性别\" />\n              <el-table-column prop=\"idCard\" label=\"借书卡号\" />\n              <el-table-column prop=\"phone\" label=\"手机号\" />\n              <el-table-column prop=\"identity\" label=\"身份\" />\n              <el-table-column prop=\"bookCount\" label=\"可借书数量\" />\n              <el-table-column prop=\"state\" label=\"用户状态\">\n                <template #default=\"users\">\n                  <span v-if=\"users.row.state === 1\">正常</span>\n                  <span v-if=\"users.row.state === 0\">冻结</span>\n                </template>\n              </el-table-column>\n              <el-table-column fixed=\"right\" label=\"操作\">\n                <template #default=\"users\">\n                  <el-button\n                    @click=\"editFromButton(editUserFormRef, users.row)\"\n                    v-if=\"users.row.id !== 1\"\n                    type=\"text\"\n                    >编辑</el-button\n                  >\n                  <el-button\n                    @click=\"deleteUserDialog(users.row)\"\n                    v-if=\"users.row.id !== 1\"\n                    type=\"text\"\n                    >删除</el-button\n                  >\n                </template>\n              </el-table-column>\n            </el-table>\n            <el-pagination\n              background\n              v-model:current-page=\"pageNum\"\n              v-model:page-size=\"pageSize\"\n              layout=\"prev, pager, next\"\n              :total=\"pageTotal\"\n              @current-change=\"page\"\n            >\n            </el-pagination>\n          </el-col>\n        </el-row>\n\n        <!--         添加用户表单 -->\n        <el-dialog\n          v-model=\"addUserFormVisible\"\n          title=\"添加用户\"\n          class=\"add-user-dialog\"\n          width=\"500px\"\n          :close-on-click-modal=\"false\"\n        >\n          <el-form\n            :model=\"addUserForm\"\n            :rules=\"userRules\"\n            ref=\"addUserFormRef\"\n            class=\"add-user-form\"\n          >\n            <el-form-item\n              label=\"所属组\"\n              :label-width=\"formLabelWidth\"\n              prop=\"groups\"\n            >\n              <el-select\n                v-model=\"addUserForm.groups\"\n                placeholder=\"请选择所属组\"\n              >\n                <el-option\n                  v-for=\"item in UserType\"\n                  :key=\"item.typeId\"\n                  :label=\"item.label\"\n                  :value=\"item.typeName\"\n                >\n                </el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item\n              label=\"用户名\"\n              :label-width=\"formLabelWidth\"\n              prop=\"username\"\n            >\n              <el-input\n                v-model=\"addUserForm.username\"\n                autocomplete=\"off\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item\n              label=\"密码\"\n              :label-width=\"formLabelWidth\"\n              prop=\"password\"\n            >\n              <el-input\n                v-model=\"addUserForm.password\"\n                type=\"password\"\n                autocomplete=\"off\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item\n              label=\"姓名\"\n              :label-width=\"formLabelWidth\"\n              prop=\"name\"\n            >\n              <el-input\n                v-model=\"addUserForm.name\"\n                autocomplete=\"off\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item\n              label=\"性别\"\n              :label-width=\"formLabelWidth\"\n              prop=\"gender\"\n            >\n              <el-select v-model=\"addUserForm.gender\" placeholder=\"请选择性别\">\n                <el-option\n                  v-for=\"item in GenderType\"\n                  :key=\"item.typeId\"\n                  :label=\"item.typeName\"\n                  :value=\"item.typeName\"\n                >\n                </el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item\n              label=\"借书卡号\"\n              :label-width=\"formLabelWidth\"\n              prop=\"idCard\"\n            >\n              <el-input\n                v-model.number=\"addUserForm.idCard\"\n                autocomplete=\"off\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item\n              label=\"手机号\"\n              :label-width=\"formLabelWidth\"\n              prop=\"phone\"\n            >\n              <el-input\n                v-model.number=\"addUserForm.phone\"\n                autocomplete=\"off\"\n                maxlength=\"11\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item\n              label=\"身份\"\n              :label-width=\"formLabelWidth\"\n              prop=\"identity\"\n            >\n              <el-select\n                v-model=\"addUserForm.identity\"\n                placeholder=\"请选择身份\"\n              >\n                <el-option\n                  v-for=\"item in IdentityType\"\n                  :key=\"item.typeId\"\n                  :label=\"item.typeName\"\n                  :value=\"item.typeName\"\n                >\n                </el-option>\n              </el-select>\n            </el-form-item>\n          </el-form>\n          <template #footer>\n            <span class=\"dialog-footer\">\n              <el-button @click=\"addUserFormVisible = false\">取消</el-button>\n              <el-button type=\"primary\" @click=\"addUserButton(addUserFormRef)\">\n                添加\n              </el-button>\n            </span>\n          </template>\n        </el-dialog>\n\n        <!--        编辑用户表单-->\n        <el-dialog\n          v-model=\"editUserFormVisible\"\n          title=\"添加用户\"\n          class=\"edit-user-dialog\"\n          width=\"500px\"\n          :close-on-click-modal=\"false\"\n        >\n          <el-form\n            :model=\"editUserForm\"\n            :rules=\"userRules\"\n            ref=\"editUserFormRef\"\n            class=\"edit-user-form\"\n          >\n            <el-form-item\n              label=\"所属组\"\n              :label-width=\"formLabelWidth\"\n              prop=\"groups\"\n            >\n              <el-select\n                v-model=\"editUserForm.groups\"\n                placeholder=\"请选择所属组\"\n              >\n                <el-option\n                  v-for=\"item in UserType\"\n                  :key=\"item.typeId\"\n                  :label=\"item.label\"\n                  :value=\"item.typeName\"\n                >\n                </el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item\n              label=\"用户名\"\n              :label-width=\"formLabelWidth\"\n              prop=\"username\"\n            >\n              <el-input\n                v-model=\"editUserForm.username\"\n                autocomplete=\"off\"\n                disabled\n              ></el-input>\n            </el-form-item>\n            <el-form-item\n              label=\"密码\"\n              :label-width=\"formLabelWidth\"\n              prop=\"password\"\n            >\n              <el-input\n                v-model=\"editUserForm.password\"\n                type=\"password\"\n                autocomplete=\"off\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item\n              label=\"姓名\"\n              :label-width=\"formLabelWidth\"\n              prop=\"name\"\n            >\n              <el-input\n                v-model=\"editUserForm.name\"\n                autocomplete=\"off\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item\n              label=\"性别\"\n              :label-width=\"formLabelWidth\"\n              prop=\"gender\"\n            >\n              <el-select v-model=\"editUserForm.gender\" placeholder=\"请选择性别\">\n                <el-option\n                  v-for=\"item in GenderType\"\n                  :key=\"item.typeId\"\n                  :label=\"item.label\"\n                  :value=\"item.typeName\"\n                >\n                </el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item\n              label=\"借书卡号\"\n              :label-width=\"formLabelWidth\"\n              prop=\"idCard\"\n            >\n              <el-input\n                v-model.number=\"editUserForm.idCard\"\n                autocomplete=\"off\"\n                disabled\n              ></el-input>\n            </el-form-item>\n            <el-form-item\n              label=\"手机号\"\n              :label-width=\"formLabelWidth\"\n              prop=\"phone\"\n            >\n              <el-input\n                v-model.number=\"editUserForm.phone\"\n                autocomplete=\"off\"\n                maxlength=\"11\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item\n              label=\"身份\"\n              :label-width=\"formLabelWidth\"\n              prop=\"identity\"\n            >\n              <el-select\n                v-model=\"editUserForm.identity\"\n                placeholder=\"请选择身份\"\n              >\n                <el-option\n                  v-for=\"item in IdentityType\"\n                  :key=\"item.typeId\"\n                  :label=\"item.typeName\"\n                  :value=\"item.typeName\"\n                >\n                </el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item\n              label=\"借书数量\"\n              :label-width=\"formLabelWidth\"\n              prop=\"bookCount\"\n            >\n              <el-input\n                v-model.number=\"editUserForm.bookCount\"\n                autocomplete=\"off\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item\n              label=\"账号状态\"\n              :label-width=\"formLabelWidth\"\n              prop=\"state\"\n            >\n              <el-select\n                v-model=\"editUserForm.state\"\n                placeholder=\"选择账号状态\"\n              >\n                <el-option\n                  v-for=\"item in StateType\"\n                  :key=\"item.id\"\n                  :label=\"item.label\"\n                  :value=\"item.value\"\n                >\n                </el-option>\n              </el-select>\n            </el-form-item>\n          </el-form>\n          <template #footer>\n            <span class=\"dialog-footer\">\n              <el-button @click=\"editUserFormVisible = false\">取消</el-button>\n              <el-button\n                type=\"primary\"\n                @click=\"editUserButton(editUserFormRef)\"\n              >\n                编辑\n              </el-button>\n            </span>\n          </template>\n        </el-dialog>\n\n        <!--        删除用户对话框-->\n        <el-dialog\n          v-model=\"deleteUserDialogVisible\"\n          title=\"删除用户\"\n          width=\"500px\"\n        >\n          <span>确认删除 {{ deleteName }}</span>\n          <template #footer>\n            <span class=\"dialog-footer\">\n              <el-button @click=\"deleteUserDialogVisible = false\"\n                >取消</el-button\n              >\n              <el-button type=\"danger\" @click=\"deleteUser\"> 确认 </el-button>\n            </span>\n          </template>\n        </el-dialog>\n      </el-main>\n    </el-container>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { reactive, ref } from \"vue\";\nimport type { FormInstance, FormRules } from \"element-plus\";\nimport { Plus, Search } from \"@element-plus/icons-vue\";\nimport axios from \"axios\";\nimport { ElMessageBox } from \"element-plus\";\n\n// 标签长度\nlet formLabelWidth = 120;\n\n// 获取用户数据\nlet users = ref();\nconst getUser = () => {\n  axios\n    .get(\"http://localhost:8888/user/\" + pageNum.value + \"/\" + pageSize.value)\n    .then((resp) => {\n      console.log(resp);\n      users.value = resp.data.content;\n      pageTotal.value = resp.data.totalElements;\n    });\n};\n\n// 显示数据数量选项\nlet pageNum = ref(1);\nlet pageSize = ref(10);\nlet pageTotal = ref(0);\nconst page = (val: number) => {\n  pageNum.value = val;\n  if (searchInput.value == undefined) {\n    getUser();\n  } else {\n    searchUser();\n  }\n};\n\n// 数据显示框\nlet sizeOptions = [\n  {\n    value: 10,\n    label: \"10条数据/页\",\n  },\n  {\n    value: 50,\n    label: \"50条数据/页\",\n  },\n  {\n    value: 100,\n    label: \"100条数据/页\",\n  },\n];\n// 修改显示数据量\nconst changeSize = (value: number) => {\n  pageSize.value = value;\n  if (searchInput.value == undefined) {\n    getUser();\n  } else {\n    searchUser();\n  }\n};\n\n// 搜索框选项\nlet searchModel = ref(\"username\");\nlet searchOptions = [\n  {\n    value: \"username\",\n    label: \"用户名\",\n  },\n  {\n    value: \"idCard\",\n    label: \"借书卡号\",\n  },\n  {\n    value: \"phone\",\n    label: \"手机号\",\n  },\n];\nconst changeSearch = (value: string) => {\n  searchModel.value = value;\n};\n\n// 搜索框数据\nconst searchInput = ref();\n// 搜索框按钮\nconst searchButton = () => {\n  pageNum.value = 1;\n  searchUser();\n};\n// 搜索用户\nconst searchUser = () => {\n  if (searchInput.value != \"\") {\n    axios\n      .get(\n        \"http://localhost:8888/user/search/\" +\n          searchModel.value +\n          \"/\" +\n          searchInput.value +\n          \"/\" +\n          pageNum.value +\n          \"/\" +\n          pageSize.value\n      )\n      .then((resp) => {\n        users.value = resp.data.content;\n        pageTotal.value = resp.data.totalElements;\n      });\n  } else {\n    getUser();\n  }\n};\n\n// 用户表单判断\nconst userRules = reactive<FormRules>({\n  groups: [{ required: true, message: \"请选择组名称\", trigger: \"change\" }],\n  username: [{ required: true, message: \"请输入用户名称\", trigger: \"blur\" }],\n  password: [{ required: true, message: \"请输入密码\", trigger: \"blur\" }],\n  name: [{ required: true, message: \"请输入用户姓名\", trigger: \"blur\" }],\n  gender: [{ required: true, message: \"请选择性别\", trigger: \"change\" }],\n  idCard: [{ required: true, message: \"请输入借书卡号\", trigger: \"blur\" }],\n  phone: [{ required: true, message: \"请输入手机号\", trigger: \"blur\" }],\n  identity: [{ required: true, message: \"请选择身份\", trigger: \"change\" }],\n  bookCount: [\n    { required: true, message: \"请输入可借阅图书数量\", trigger: \"blur\" },\n  ],\n  state: [{ required: true, message: \"请选择账号状态\", trigger: \"change\" }],\n});\n\n// 选项框属性\nconst UserType = ref([\n  {\n    typeId: 1,\n    typeName: \"admin\",\n    label: \"管理员\",\n  },\n  {\n    typeId: 2,\n    typeName: \"user\",\n    label: \"用户\",\n  },\n]);\nconst GenderType = ref([\n  {\n    typeId: 1,\n    typeName: \"男\",\n  },\n  {\n    typeId: 2,\n    typeName: \"女\",\n  },\n]);\nconst IdentityType = ref([\n  {\n    typeId: 1,\n    typeName: \"管理员\",\n  },\n  {\n    typeId: 2,\n    typeName: \"学生\",\n  },\n  {\n    typeId: 3,\n    typeName: \"教师\",\n  },\n]);\nconst StateType = ref([\n  {\n    id: 1,\n    value: 1,\n    label: \"正常\",\n  },\n  {\n    id: 2,\n    value: 0,\n    label: \"冻结\",\n  },\n]);\n\n// 添加用户对话框显示\nlet addUserFormVisible = ref(false);\n// 添加用户表单按钮\nconst addFromButton = (formEl: FormInstance | undefined) => {\n  addUserFormVisible.value = true;\n  if (!formEl) return;\n  formEl.resetFields();\n};\n\n// 添加用户表单\nconst addUserFormRef = ref<FormInstance>();\nlet addUserForm = reactive({\n  groups: \"\",\n  username: \"\",\n  password: \"\",\n  name: \"\",\n  gender: \"\",\n  idCard: \"\",\n  phone: \"\",\n  identity: \"\",\n});\n\n// 添加用户按钮\nconst addUserButton = (formEl: FormInstance | undefined) => {\n  if (!formEl) return;\n  formEl.validate((valid) => {\n    if (valid) {\n      axios\n        .post(\"http://localhost:8888/user/save\", addUserForm)\n        .then((resp) => {\n          const statusCode = resp.data.statusCode;\n\n          // 添加失败\n          if (statusCode == 0) {\n            ElMessageBox.alert(\"添加用户失败，请重试\", \"信息\", {\n              confirmButtonText: \"确认\",\n            });\n          }\n          // 添加成功\n          if (statusCode == 1) {\n            ElMessageBox.alert(\"添加成功\", \"信息\", {\n              confirmButtonText: \"确认\",\n              callback: () => {\n                addUserFormVisible.value = false;\n              },\n            });\n          }\n          // 用户名存在\n          if (statusCode == 2) {\n            ElMessageBox.alert(\"添加失败，此用户名已存在\", \"信息\", {\n              confirmButtonText: \"确认\",\n            });\n          }\n          // 借书卡存在\n          if (statusCode == 3) {\n            ElMessageBox.alert(\"添加失败，此借书卡已存在\", \"信息\", {\n              confirmButtonText: \"确认\",\n            });\n          }\n          // 手机号存在\n          if (statusCode == 4) {\n            ElMessageBox.alert(\"添加失败，此手机号已存在\", \"信息\", {\n              confirmButtonText: \"确认\",\n            });\n          }\n        });\n    } else {\n      return false;\n    }\n  });\n};\n\n// 编辑用户对话框\nlet editUserFormVisible = ref(false);\nconst editFromButton = (formEl: FormInstance | undefined, row: number) => {\n  editUserFormVisible.value = true;\n  editUserForm = reactive(JSON.parse(JSON.stringify(row)));\n  if (!formEl) return;\n  formEl.resetFields();\n};\n\n// 编辑用户表单\nconst editUserFormRef = ref<FormInstance>();\nlet editUserForm = reactive({\n  groups: \"\",\n  username: \"\",\n  password: \"\",\n  name: \"\",\n  gender: \"\",\n  idCard: \"\",\n  phone: \"\",\n  identity: \"\",\n  bookCount: 0,\n  state: 1,\n});\n\n// 编辑用户按钮\nconst editUserButton = (formEl: FormInstance | undefined) => {\n  if (!formEl) return;\n  formEl.validate((valid) => {\n    if (valid) {\n      axios\n        .post(\"http://localhost:8888/user/update\", editUserForm)\n        .then((resp) => {\n          const statusCode = resp.data.statusCode;\n\n          // 编辑失败\n          if (statusCode == 0) {\n            ElMessageBox.alert(\"编辑用户失败，请重试\", \"信息\", {\n              confirmButtonText: \"确认\",\n            });\n          }\n          // 编辑成功\n          if (statusCode == 1) {\n            ElMessageBox.alert(\"编辑成功\", \"信息\", {\n              confirmButtonText: \"确认\",\n              callback: () => {\n                editUserFormVisible.value = false;\n              },\n            });\n          }\n          // 手机号\n          if (statusCode == 2) {\n            ElMessageBox.alert(\"编辑失败，此手机号已存在\", \"信息\", {\n              confirmButtonText: \"确认\",\n            });\n          }\n        });\n    } else {\n      return false;\n    }\n  });\n};\n\n// 删除用户\nlet deleteName = ref(\"\");\nlet deleteId = ref(0);\nlet deleteUserDialogVisible = ref(false);\nconst deleteUserDialog = (row: any) => {\n  deleteId.value = row.id;\n  deleteName.value = row.username;\n  deleteUserDialogVisible.value = true;\n};\n\n// 删除用户按钮\nconst deleteUser = () => {\n  if (deleteId.value) {\n    axios\n      .post(\"http://localhost:8888/user/delete/\" + deleteId.value)\n      .then((resp) => {\n        const statusCode = resp.data.statusCode;\n\n        // 删除失败\n        if (statusCode == 0) {\n          ElMessageBox.alert(\"删除用户失败，请重试\", \"信息\", {\n            confirmButtonText: \"确认\",\n          });\n        }\n        // 删除成功\n        if (statusCode == 1) {\n          ElMessageBox.alert(\"删除成功\", \"信息\", {\n            confirmButtonText: \"确认\",\n            callback: () => {\n              deleteUserDialogVisible.value = false;\n            },\n          });\n        }\n        // Id 不存在\n        if (statusCode == 2) {\n          ElMessageBox.alert(\"删除失败，此 Id 不存在\", \"信息\", {\n            confirmButtonText: \"确认\",\n          });\n        }\n      });\n  }\n};\n\n// 初始化\nconst init = () => {\n  getUser();\n};\ninit();\n</script>\n\n<style lang=\"scss\">\n@import \"../assets/css/user\";\n</style>\n","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\views\\SystemView.vue",[],"C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\logincomponents\\SwitchView.vue",[],"C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\logincomponents\\Sign-up.vue",[],"C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\logincomponents\\Sign-in.vue",["109","110"],"<!-- sign_in -->\n<template>\n  <div class=\"container b-container\" id=\"b-container\">\n    <!-- 用户登录表单内容 -->\n    <form class=\"form\">\n      <h2 class=\"form_title title\">图书管理系统</h2>\n\n      <!-- 登录表单 -->\n\n      <div class=\"form__icons\"></div>\n      <span class=\"form__span\"></span>\n      <el-form\n        ref=\"loginFormRef\"\n        :model=\"loginForm\"\n        :rules=\"loginRules\"\n        @keyup.enter=\"login(loginFormRef)\"\n      >\n        <el-form-item>\n          <el-input\n            v-model=\"loginForm.username\"\n            placeholder=\"用户名\"\n            class=\"form__input\"\n          ></el-input>\n        </el-form-item>\n\n        <el-form-item>\n          <el-input\n            type=\"password\"\n            v-model=\"loginForm.password\"\n            placeholder=\"密码\"\n            class=\"form__input\"\n          ></el-input>\n        </el-form-item>\n\n        <a class=\"form__link\">忘记密码了？</a>\n\n        <el-form-item>\n          <div class=\"button-container\">\n            <el-button\n              type=\"primary\"\n              @click=\"login(loginFormRef)\"\n              ref=\"loginButtonRef\"\n              :disabled=\"loginState\"\n              class=\"form__button button submit\"\n              >登录</el-button\n            >\n          </div>\n        </el-form-item>\n      </el-form>\n    </form>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, reactive, onMounted, watch } from \"vue\";\nimport useEmitter from \"@/hooks/useloginEmitter.js\";\nimport type { FormInstance, FormRules } from \"element-plus\";\nimport { ElMessageBox } from \"element-plus\";\nimport axios from \"axios\";\nimport jsCookie from \"js-cookie\";\nimport router from \"@/router\";\n\nconst signUpForm = ref({\n  username: \"\",\n  password: \"\",\n  additionalInfo: \"\",\n});\n\n// 状态管理\nconst emitter = useEmitter();\nconst isOpen = ref(false); // 初始状态\n\n// 监听事件\nonMounted(() => {\n  emitter.on(\"change\", (newIsOpen: boolean) => {\n    isOpen.value = newIsOpen; // 更新响应式状态\n    const bContainer = document.querySelector(\"#b-container\") as HTMLElement;\n    if (bContainer) {\n      bContainer.classList.toggle(\"is-txr\", isOpen.value);\n    }\n  });\n});\n\n// 判断用户登录状态\nconst userLoginState = jsCookie.get(\"username\");\nif (userLoginState != undefined) {\n  router.push(\"/home\");\n}\n\n// 登录表单\nconst loginButtonRef = ref();\nlet loginState = ref(false);\n\n// 登陆表单\nconst loginFormRef = ref<FormInstance>();\nconst loginForm = reactive({\n  username: \"\",\n  password: \"\",\n});\n\n// 表单校验\nconst loginRules = reactive<FormRules>({\n  username: [{ required: true, message: \"请输入用户名\", trigger: \"blur\" }],\n  password: [{ required: true, message: \"请输入密码\", trigger: \"blur\" }],\n});\n\n// 登录操作\nconst login = (formEl: FormInstance | undefined) => {\n  if (!formEl) return;\n  formEl.validate((valid) => {\n    if (valid && !loginState.value) {\n      loginState.value = true;\n      // 发送客户端请求\n      axios\n        .post(\"http://localhost:8888/login/admin\", loginForm)\n        .then((resp) => {\n          const statusCode = resp.data.statusCode;\n\n          // 登录失败\n          if (statusCode == 0) {\n            ElMessageBox.alert(\"登录失败，账号或密码错误\", \"信息\", {\n              confirmButtonText: \"重试\",\n            });\n            loginState.value = false;\n          }\n\n          // 登录成功\n          if (statusCode == 1) {\n            ElMessageBox.alert(\"登录成功\", \"信息\", {\n              confirmButtonText: \"确认\",\n              callback: () => {\n                // 设置Cookie\n                jsCookie.set(\"username\", resp.data.username, {\n                  expires: 1,\n                  path: \"/\",\n                });\n                // 页面跳转\n                router.push(\"/home\");\n              },\n            });\n          }\n\n          // 登录失败\n          if (statusCode == 2) {\n            ElMessageBox.alert(\"登录失败，账号已被冻结\", \"信息\", {\n              confirmButtonText: \"确定\",\n            });\n            loginState.value = false;\n          }\n        });\n    } else {\n      return false;\n    }\n  });\n};\n</script>\n\n<style scoped>\n@import \"./login.css\";\n/* 将源码中的css样式单独存放,在各组件中导入就可以。*/\n</style>\n","C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\hooks\\useloginEmitter.js",[],[],"C:\\LibraryManage\\LibraryManage\\Library-UI\\library\\src\\views\\LoginView.vue",[],{"ruleId":"111","severity":1,"message":"112","line":5,"column":8,"nodeType":"113","messageId":"114","endLine":5,"endColumn":17},{"ruleId":"111","severity":1,"message":"115","line":351,"column":8,"nodeType":"113","messageId":"114","endLine":351,"endColumn":14},{"ruleId":"116","severity":1,"message":"117","line":460,"column":26,"nodeType":"118","messageId":"119","endLine":460,"endColumn":29,"suggestions":"120"},{"ruleId":"116","severity":1,"message":"117","line":460,"column":38,"nodeType":"118","messageId":"119","endLine":460,"endColumn":41,"suggestions":"121"},{"ruleId":"116","severity":1,"message":"117","line":460,"column":53,"nodeType":"118","messageId":"119","endLine":460,"endColumn":56,"suggestions":"122"},{"ruleId":"116","severity":1,"message":"117","line":557,"column":64,"nodeType":"118","messageId":"119","endLine":557,"endColumn":67,"suggestions":"123"},{"ruleId":"116","severity":1,"message":"117","line":619,"column":32,"nodeType":"118","messageId":"119","endLine":619,"endColumn":35,"suggestions":"124"},{"ruleId":"116","severity":1,"message":"117","line":118,"column":23,"nodeType":"118","messageId":"119","endLine":118,"endColumn":26,"suggestions":"125"},{"ruleId":"116","severity":1,"message":"117","line":118,"column":34,"nodeType":"118","messageId":"119","endLine":118,"endColumn":37,"suggestions":"126"},{"ruleId":"116","severity":1,"message":"117","line":154,"column":24,"nodeType":"118","messageId":"119","endLine":154,"endColumn":27,"suggestions":"127"},{"ruleId":"116","severity":1,"message":"117","line":105,"column":10,"nodeType":"118","messageId":"119","endLine":105,"endColumn":13,"suggestions":"128"},{"ruleId":"116","severity":1,"message":"117","line":106,"column":10,"nodeType":"118","messageId":"119","endLine":106,"endColumn":13,"suggestions":"129"},{"ruleId":"116","severity":1,"message":"117","line":107,"column":10,"nodeType":"118","messageId":"119","endLine":107,"endColumn":13,"suggestions":"130"},{"ruleId":"111","severity":1,"message":"131","line":109,"column":7,"nodeType":"113","messageId":"114","endLine":109,"endColumn":8},{"ruleId":"116","severity":1,"message":"117","line":184,"column":32,"nodeType":"118","messageId":"119","endLine":184,"endColumn":35,"suggestions":"132"},{"ruleId":"116","severity":1,"message":"117","line":191,"column":34,"nodeType":"118","messageId":"119","endLine":191,"endColumn":37,"suggestions":"133"},{"ruleId":"116","severity":1,"message":"117","line":744,"column":32,"nodeType":"118","messageId":"119","endLine":744,"endColumn":35,"suggestions":"134"},{"ruleId":"111","severity":1,"message":"135","line":55,"column":36,"nodeType":"113","messageId":"114","endLine":55,"endColumn":41},{"ruleId":"111","severity":1,"message":"136","line":63,"column":7,"nodeType":"113","messageId":"114","endLine":63,"endColumn":17},"@typescript-eslint/no-unused-vars","'LoginView' is defined but never used.","Identifier","unusedVar","'router' is defined but never used.","@typescript-eslint/no-explicit-any","Unexpected any. Specify a different type.","TSAnyKeyword","unexpectedAny",["137","138"],["139","140"],["141","142"],["143","144"],["145","146"],["147","148"],["149","150"],["151","152"],["153","154"],["155","156"],["157","158"],"'d' is assigned a value but never used.",["159","160"],["161","162"],["163","164"],"'watch' is defined but never used.","'signUpForm' is assigned a value but never used.",{"messageId":"165","fix":"166","desc":"167"},{"messageId":"168","fix":"169","desc":"170"},{"messageId":"165","fix":"171","desc":"167"},{"messageId":"168","fix":"172","desc":"170"},{"messageId":"165","fix":"173","desc":"167"},{"messageId":"168","fix":"174","desc":"170"},{"messageId":"165","fix":"175","desc":"167"},{"messageId":"168","fix":"176","desc":"170"},{"messageId":"165","fix":"177","desc":"167"},{"messageId":"168","fix":"178","desc":"170"},{"messageId":"165","fix":"179","desc":"167"},{"messageId":"168","fix":"180","desc":"170"},{"messageId":"165","fix":"181","desc":"167"},{"messageId":"168","fix":"182","desc":"170"},{"messageId":"165","fix":"183","desc":"167"},{"messageId":"168","fix":"184","desc":"170"},{"messageId":"165","fix":"185","desc":"167"},{"messageId":"168","fix":"186","desc":"170"},{"messageId":"165","fix":"187","desc":"167"},{"messageId":"168","fix":"188","desc":"170"},{"messageId":"165","fix":"189","desc":"167"},{"messageId":"168","fix":"190","desc":"170"},{"messageId":"165","fix":"191","desc":"167"},{"messageId":"168","fix":"192","desc":"170"},{"messageId":"165","fix":"193","desc":"167"},{"messageId":"168","fix":"194","desc":"170"},{"messageId":"165","fix":"195","desc":"167"},{"messageId":"168","fix":"196","desc":"170"},"suggestUnknown",{"range":"197","text":"198"},"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct.","suggestNever",{"range":"197","text":"199"},"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of.",{"range":"200","text":"198"},{"range":"200","text":"199"},{"range":"201","text":"198"},{"range":"201","text":"199"},{"range":"202","text":"198"},{"range":"202","text":"199"},{"range":"203","text":"198"},{"range":"203","text":"199"},{"range":"204","text":"198"},{"range":"204","text":"199"},{"range":"205","text":"198"},{"range":"205","text":"199"},{"range":"206","text":"198"},{"range":"206","text":"199"},{"range":"207","text":"198"},{"range":"207","text":"199"},{"range":"208","text":"198"},{"range":"208","text":"199"},{"range":"209","text":"198"},{"range":"209","text":"199"},{"range":"210","text":"198"},{"range":"210","text":"199"},{"range":"211","text":"198"},{"range":"211","text":"199"},{"range":"212","text":"198"},{"range":"212","text":"199"},[12723,12726],"unknown","never",[12735,12738],[12750,12753],[15288,15291],[16775,16778],[3431,3434],[3442,3445],[4045,4048],[3013,3016],[3052,3055],[3093,3096],[4856,4859],[5046,5049],[20160,20163]]